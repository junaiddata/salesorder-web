<!-- Totals Row -->
<tr class="totals-row">
  <td class="sticky-col" style="left: 0; font-weight: 700; background: var(--primary-light);">TOTAL</td>
  <td class="sticky-col" style="left: 180px; font-weight: 700; background: var(--primary-light);"></td>
  {% for totals in totals_list %}
    <td class="text-right totals-cell" style="font-weight: 700; background: var(--primary-light);">{{ totals.total_sales|default:0|floatformat:2|intcomma }}</td>
    {% if is_admin %}<td class="text-right totals-cell" style="font-weight: 700; background: var(--primary-light);">{{ totals.total_gp|default:0|floatformat:2|intcomma }}</td>{% endif %}
    {% if is_admin %}<td class="text-right totals-cell" style="font-weight: 700; background: var(--primary-light);">{{ totals.total_gp_percent|default:0|floatformat:2 }}%</td>{% endif %}
  {% endfor %}
</tr>
{% for customer in customers %}
<tr>
  <td class="sticky-col" style="left: 0;">
    <div class="customer-name">{{ customer.customer_name|default:"Unknown" }}</div>
    {% if customer.customer_code %}
    <div class="customer-code">{{ customer.customer_code }}</div>
    {% endif %}
  </td>
  <td class="sticky-col customer-salesman" style="left: 180px;">{{ customer.salesman_name|default:"â€”" }}</td>
  {% for year_data in customer.year_list %}
    <td class="text-right">{{ year_data.total_sales|default:0|floatformat:2|intcomma }}</td>
    {% if is_admin %}<td class="text-right">{{ year_data.total_gp|default:0|floatformat:2|intcomma }}</td>{% endif %}
    {% if is_admin %}<td class="text-right">{{ year_data.gp_percent|default:0|floatformat:2 }}%</td>{% endif %}
  {% endfor %}
</tr>
{% empty %}
<tr>
  <td colspan="{% widthratio years|length 1 3 %}" class="empty-state">
    <i class="fas fa-inbox"></i>
    <p>No customer data available</p>
  </td>
</tr>
{% endfor %}
